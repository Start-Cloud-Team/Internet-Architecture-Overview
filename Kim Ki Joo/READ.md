
<img width="1927" height="874" alt="image" src="https://github.com/user-attachments/assets/d8a36552-a2bf-404a-a422-9d6e19c54b9e" />

> ***작동원리***


**1단계 : 개발 및 코드 커밋**

1. 개발자가 IDE에서 개발을 진행함
2. Trivy를 통해서 보안 취약점을 검사하는 과정을 거침
3. Git Hook을 통해서 민감 정보 & 기본적인 취약점을 검사함.
4. 검사를 마친 코드들을 GitHub로 업로드

**2단계: 지속적 통합 (CI)**

1. 개발자가 GitHub에 수정된 코드를 Push하려고 하면 GitHub Action이 파이프라인을 실행함
2. Trivy For GitHub Action을 통해서 코드 자체 검사(SAST)와 라이브러리 검사(SCA) 검사를 진행함.
3. 검사를 마친 코드를 Docker를 이용해서 이미지화 시킴.
4. Trivy For GitHub Action을 통해서 빌드된 컨테이너의 보안 설정을 스캔하여서 오설정을 확인.
5. 검사 도중 취약점의 갯수가 임계 설정값을 초과하면 빌드를 실패처리하여서 1단계부터 재시작

**3단계 : 아티팩트 저장소**

1. 검사를 모두 통과한 이미지를 Amazon ECR에 저장함
2. 일반 배포 파일 등의 파일들을 AWS S3에 저장함

**4단계: 지속적 배포 (CD)**

1. 저장소에 있는 이미지를 실제 클라우드 환경(Amazon EC2)에 배포함
2. OWASP ZAP을 통해서 외부에서 실제 공격 시뮬레이션(DAST)를 진행하여서 취약점을 탐지
3. 애플리케이션에 필요한 중요 정보들을 안전하게 주입하기 위해서 AWS Secrets Manager 사용

**5단계: 모니터링 & 운영**

1. 외부의 이상 트래픽을 차단하기 위해서 AWS WAF로 규칙 설정
2. 배포된 클라우드 인프라의 보안 설정이 정상적으로 유지되고 있는지 모니터링 하기 위해서
AWS security hub를 사용
3. 모든 보안 이벤트 및 이상 행위를 중앙 집중식으로 수집하고 분석하는 AWS CloudWatch를 사용

> ***선택사유***

- 현재 우리의 환경에 목표는 [스타트업 기업]
- 사용하는 환경은 [AWS, 오픈소스]
- 해당 환경에서 가장 사용하기 좋은 것들로 구성하다 보니, 이런 형태가 나왔습니다.
- 개발에서 사용하는 [VScode, Cursor] IDE
- 개발 커밋에서 사용하기 좋은 [Trivy]
    - SAST, SCA, 컨테이너 이미지 스캔, IaC 스캔을 하나의 도구로 해결할 수 있는 다기능
    - 초기 비용이 없는 무료, 오픈소스
- 지속적 통합에서 사용한 [GitHub Action OR GitHub CI]
    - 소스 코드 저장소(GitHub)와 통합성이 높음
    - 별도의 CI 서버 구축, 운영 및 비용 노력이 필요하지 않음
    - 사용량 기반의 과금으로 초기 비용 역시 적음
- 지속적 배포에서 사용한 [OWASP ZAP]
    - API 및 CLI 환경에 특화 되어있어서, 자동화된 DAST를 실행해보기 좋음
    - OWASP의 산하 프로젝트이다 보니 비용이 없는 무료.
    - Headless에서 실행되기에, 자동화 스크립트로 실행하기 좋음
- 운영 및 모니터링에서 사용한 [AWS CSP]
    - 인프라 및 핵심 서비스의 구축 및 패치, 유지보수를 CSP에 맡기므로 보안 인력의 부담이 줌
    - WAF를 통해서 기본적인 보안을, Secrets Manager를 통해서 보안 취약점을 제거하고,
    CloudWatch를 통해서 오류 기반 사고를 방지할 수 있음.
    - 운영 편리성과 신뢰성을 얻을 수 있는 서비스를 사용함으로써 부담이 줄어듬.
